<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<title>Zahlenverschlüsselung</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 40px;
        max-width: 600px;
    }
    textarea {
        width: 100%;
        height: 120px;
        margin-bottom: 20px;
        font-size: 16px;
    }
    button {
        padding: 10px 20px;
        font-size: 16px;
        margin-right: 10px;
        cursor: pointer;
    }
</style>
</head>
<body>

<h1>Zahlenverschlüsselung</h1>

<p>Gib deinen Text ein und klicke auf „Verschlüsseln“ oder „Entschlüsseln“.</p>

<textarea id="input" placeholder="Hier Text eingeben..."></textarea>

<br>

<button onclick="encrypt()">Verschlüsseln</button>
<button onclick="decrypt()">Entschlüsseln</button>

<h3>Ausgabe:</h3>
<textarea id="output" readonly></textarea>

<script>
// --- Korrigierte Verschlüsselung ---
const map = {
    'a':65, 'b':63, 'c':62, 'd':60, 'e':10, 'f':17, 'g':67, 'h':34,
    'i':21, 'j':19, 'k':18, 'l':16, 'm':15, 'n':14,
    'o':13,     // Korrigiert
    'p':72,
    'q':95,     // Korrigiert
    'r':58, 's':43, 't':97,
    'u':86, 'v':53, 'w':98, 'x':17, 'y':29, 'z':33,
    'ä':73, 'ö':76, 'ü':78
};

// Rückwärtsmapping → Zahl → Buchstabe
const reverseMap = {};
for (const [char, num] of Object.entries(map)) {
    if (!reverseMap[num]) reverseMap[num] = [];
    reverseMap[num].push(char);
}

function encrypt() {
    const text = document.getElementById('input').value.toLowerCase();
    let result = [];

    for (const ch of text) {
        if (map[ch] !== undefined) {
            result.push(map[ch]);
        } else {
            result.push(ch); // Unbekannte Zeichen bleiben erhalten
        }
    }

    document.getElementById('output').value = result.join(" ");
}

function decrypt() {
    const text = document.getElementById('input').value.trim();
    const parts = text.split(/\s+/);
    let result = "";

    for (const p of parts) {
        if (reverseMap[p]) {
            result += reverseMap[p][0];  // Bei mehreren Möglichkeiten erste wählen
        } else {
            result += p;
        }
    }

    document.getElementById('output').value = result;
}
</script>

</body>
</html>
